# 董公擇日 App 需求文件

## 專案簡介

開發一款基於正統董公擇日傳統的移動應用程式，深度整合十二建星、干支五行、神煞系統等傳統擇日核心要素，為用戶提供準確的個人化日期選擇建議，並建立可持續的商業模式。

## 董公擇日核心特色

董公擇日區別於一般農民曆的獨特之處：
- **十二建星循環**：建、除、滿、平、定、執、破、危、成、收、開、閉的專門規則
- **干支五行配合**：天干地支與五行相生相剋的複雜計算
- **神煞系統**：獨特的吉神凶煞判斷邏輯
- **個人化差異**：同一日對不同人的吉凶可能完全不同
- **時辰重要性**：「日吉不如時吉」的精確時間選擇
- **身份區別**：大富貴人與平民的擇日原則差異

## 需求清單

### 需求 1：董公擇日核心計算功能

**用戶故事：** 作為一個需要選擇吉日的用戶，我希望能獲得基於正統董公規則的精確擇日分析，以便做出最佳的時間決定。

#### 驗收標準
1. WHEN 用戶選擇任意日期 THEN 系統 SHALL 計算並顯示該日的十二建星（建、除、滿、平、定、執、破、危、成、收、開、閉）
2. WHEN 用戶查看日期詳情 THEN 系統 SHALL 顯示年月日時的完整干支配置和五行屬性
3. WHEN 用戶查看神煞 THEN 系統 SHALL 根據董公規則顯示當日的吉神（天德、月德、天喜等）和凶煞（五鬼、死符、歲破等）
4. WHEN 用戶查看宜忌 THEN 系統 SHALL 基於十二建星和神煞配置顯示適宜和禁忌的具體事項
5. WHEN 用戶查看特殊日 THEN 系統 SHALL 標示「四絕」、「四離」、「建巳日」、「定戍日」等特殊吉凶日

### 需求 2：個人化擇日推薦功能

**用戶故事：** 作為一個有特定需求的用戶，我希望系統能結合我的生辰八字和事項類型，推薦最適合我個人的吉日吉時，以便獲得最佳的擇日效果。

#### 驗收標準
1. WHEN 用戶輸入生辰八字 THEN 系統 SHALL 計算個人命理與日期的五行配合關係
2. WHEN 用戶選擇事項類型（嫁娶、動土、開市、安葬等）THEN 系統 SHALL 根據董公規則推薦該事項的專屬吉日
3. WHEN 用戶查看推薦結果 THEN 系統 SHALL 顯示每個日期的十二建星、神煞配置和個人化評分
4. WHEN 用戶查看推薦理由 THEN 系統 SHALL 說明為何該日適合該用戶和該事項的具體董公規則
5. WHEN 用戶需要精確時間 THEN 系統 SHALL 推薦該日的最佳時辰（子時、丑時等）

### 需求 3：身份區別與商業模式功能

**用戶故事：** 作為 App 營運者，我希望建立符合董公擇日傳統的分級服務機制，區分不同用戶的擇日需求，以便提供適當的服務並獲得收益。

#### 驗收標準
1. WHEN 免費用戶使用 THEN 系統 SHALL 提供基礎十二建星查詢功能（每日限制3次）
2. WHEN 用戶升級為「平民擇日」會員 THEN 系統 SHALL 解鎖完整神煞分析和個人化八字配合功能
3. WHEN 用戶升級為「富貴擇日」會員 THEN 系統 SHALL 提供精確時辰分析和專業擇日建議
4. WHEN 用戶需要專業分析 THEN 系統 SHALL 提供詳細的董公規則解釋和歷史典故（付費功能）
5. WHEN 用戶購買服務 THEN 系統 SHALL 整合 iOS/Android 內購機制並提供不同等級的擇日服務

### 需求 4：傳統與現代結合的用戶體驗功能

**用戶故事：** 作為移動設備用戶，我希望 App 能以現代化介面呈現傳統董公擇日智慧，讓我能輕鬆理解和應用這些古老的擇日規則。

#### 驗收標準
1. WHEN 用戶首次使用 THEN 系統 SHALL 提供董公擇日基本概念的引導教學（十二建星、干支五行等）
2. WHEN 用戶查看日曆 THEN 系統 SHALL 以傳統色彩標示十二建星和吉凶等級
3. WHEN 用戶查看詳細分析 THEN 系統 SHALL 提供傳統術語的現代化解釋和實用建議
4. WHEN 用戶需要學習 THEN 系統 SHALL 提供董公擇日知識庫和常見問題解答
5. WHEN 用戶分享結果 THEN 系統 SHALL 生成美觀的傳統風格分享圖片

### 需求 5：董公擇日專業計算技術基礎

**用戶故事：** 作為開發團隊，我希望建立準確可靠的董公擇日計算系統，確保所有計算結果符合傳統董公規則的精確要求。

#### 驗收標準
1. WHEN 系統計算農曆 THEN 系統 SHALL 基於 6tail/lunar 開源庫進行精確的農曆和干支計算
2. WHEN 系統計算十二建星 THEN 系統 SHALL 實作正統的建除循環算法
3. WHEN 系統判斷神煞 THEN 系統 SHALL 根據年月日時干支配置準確計算吉神凶煞
4. WHEN 系統分析五行 THEN 系統 SHALL 實作干支五行相生相剋的複雜判斷邏輯
5. WHEN 系統驗證準確性 THEN 系統 SHALL 與權威董公擇日資料源進行比對驗證
6. WHEN 用戶使用離線功能 THEN 系統 SHALL 支援基礎董公計算的離線使用

### 需求 6：特殊日期與節氣功能

**用戶故事：** 作為董公擇日的使用者，我希望系統能準確識別和提醒各種特殊的吉凶日期，以便避開大凶日並把握大吉日。

#### 驗收標準
1. WHEN 系統遇到特殊凶日 THEN 系統 SHALL 明確標示「建巳日」、「平巳日」、「破申日」、「危酉日」等大凶日並警告用戶
2. WHEN 系統遇到特殊吉日 THEN 系統 SHALL 突出顯示「定戍日」、「定午日」等大吉日並推薦重要事項
3. WHEN 系統計算節氣 THEN 系統 SHALL 準確標示「四絕」（立春、立夏、立秋、立冬前一日）和「四離」（春分、秋分、夏至、冬至前一日）
4. WHEN 系統分析煞方 THEN 系統 SHALL 根據節氣計算三煞、年煞、月厭等方位煞氣
5. WHEN 系統檢測「煞入中宮」THEN 系統 SHALL 警告用戶該日為大凶，特別忌動土、婚姻、安宅

### 需求 7：商業分析與用戶管理功能

**用戶故事：** 作為產品經理，我希望了解用戶的擇日需求和使用模式，以便優化董公擇日服務的商業策略。

#### 驗收標準
1. WHEN 用戶查詢擇日 THEN 系統 SHALL 記錄查詢的事項類型和日期偏好（匿名化）
2. WHEN 分析用戶行為 THEN 系統 SHALL 統計最受歡迎的擇日事項和時間段
3. WHEN 評估服務品質 THEN 系統 SHALL 追蹤計算準確性和用戶滿意度
4. WHEN 優化商業模式 THEN 系統 SHALL 分析不同等級用戶的使用模式和付費轉換率